import{m as f,r as o,j as e}from"./app-W6sqJIB5.js";function N(){const{data:c,setData:m,post:b,processing:u,errors:a}=f({title:"",description:"",is_published:!1,published_at:"",images:[]}),[i,h]=o.useState(null),[n,x]=o.useState([]),d=s=>{const{name:t,type:r,checked:l,value:j}=s.target;m(t,r==="checkbox"?l:j)},p=s=>{const{name:t,files:r}=s.target;if(t==="background_image"){const l=r[0];m("background_image",l),h(l?URL.createObjectURL(l):null)}t==="images"&&(m("images",Array.from(r)),x(Array.from(r).map(l=>URL.createObjectURL(l))))};o.useEffect(()=>()=>{i&&URL.revokeObjectURL(i),n.forEach(s=>URL.revokeObjectURL(s))},[i,n]);const g=s=>{s.preventDefault(),b("/posts",{forceFormData:!0,onError:()=>{}})};return e.jsxs("div",{className:"container mx-auto p-6 max-w-2xl",children:[e.jsx("h1",{className:"text-3xl mb-6",children:"Create a new post"}),e.jsxs("form",{onSubmit:g,encType:"multipart/form-data",className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"title",className:"block mb-1",children:"Title"}),e.jsx("input",{type:"text",name:"title",id:"title",value:c.title,onChange:d,className:"w-full border rounded p-2"}),a.title&&e.jsx("p",{className:"text-red-600 text-sm",children:a.title})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"description",className:"block mb-1",children:"Description"}),e.jsx("textarea",{name:"description",id:"description",rows:"4",value:c.description,onChange:d,className:"w-full border rounded p-2"}),a.description&&e.jsx("p",{className:"text-red-600 text-sm",children:a.description})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",name:"is_published",id:"is_published",checked:c.is_published,onChange:d,className:"mr-2"}),e.jsx("label",{htmlFor:"is_published",children:"Publish?"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"published_at",className:"block mb-1",children:"Date of publication"}),e.jsx("input",{type:"datetime-local",name:"published_at",id:"published_at",value:c.published_at,onChange:d,className:"w-full border rounded p-2"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"background_image",className:"block mb-1",children:"Background image"}),e.jsx("input",{id:"background_image",name:"background_image",type:"file",accept:"image/*",onChange:p,className:"w-full"}),a.background_image&&e.jsx("p",{className:"text-red-600 text-sm",children:a.background_image}),i&&e.jsx("img",{src:i,alt:"preview",className:"mt-3 h-40 w-full object-cover rounded border"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"images",className:"block mb-1",children:"Images Gallery"}),e.jsx("input",{id:"images",name:"images",type:"file",multiple:!0,accept:"image/*",onChange:p,className:"w-full"}),a.images&&e.jsx("p",{className:"text-red-600 text-sm",children:a.images}),n.length>0&&e.jsx("div",{className:"mt-3 grid grid-cols-3 gap-2",children:n.map((s,t)=>e.jsx("img",{src:s,alt:`preview-${t}`,className:"h-24 w-full object-cover rounded border"},t))})]}),e.jsx("button",{type:"submit",disabled:u,className:"bg-blue-500 text-white px-6 py-2 rounded hover:bg-blue-600 disabled:opacity-50",children:u?"Сохраняю…":"Сохранить"})]})]})}export{N as default};
